<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover" />
<title>CFU - Club de Fermentos Uniandes</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
:root{
  --neon-a:#00ffee;--neon-b:#ff00ff;--accent:#00ffff;
  --bg1:#0a0015;--bg2:#18003a;
}

/* Base */
html,body{height:100%;margin:0}
body{
  background:radial-gradient(circle at center,var(--bg1) 0%,var(--bg2) 80%);
  overflow:hidden;
  font-family:'Press Start 2P',monospace;
  color:var(--neon-a);
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  text-align:center;
  cursor:url('https://cur.cursors-4u.net/games/gam-1/gam51.cur'),auto;
  animation:pulse 6s infinite alternate;
}
@keyframes pulse{
  0%{background:radial-gradient(circle at center,#0a0015 0%,#18003a 80%)}
  100%{background:radial-gradient(circle at center,#0a0015 0%,#29005a 80%)}
}
body::before{
  content:"";position:fixed;inset:0;
  background:repeating-linear-gradient(to bottom,rgba(255,255,255,.05)0,rgba(255,255,255,.02)2px,transparent 4px);
  pointer-events:none;
  mix-blend-mode:overlay;
}

/* bubbles */
.bubble,.star{position:fixed;border-radius:50%;opacity:.8;pointer-events:none;animation:floatY 10s linear infinite}
.bubble{width:12px;height:12px;background:rgba(0,255,255,.6);filter:blur(1px)}
.star{width:6px;height:6px;background:var(--neon-b);box-shadow:0 0 10px var(--neon-b);animation-duration:6s}
@keyframes floatY{from{transform:translateY(100vh)}to{transform:translateY(-10vh)}}

/* logo/title */
#logo{width:70px;height:70px;background:url('https://upload.wikimedia.org/wikipedia/commons/3/33/Glass_jar_icon.svg')center/contain no-repeat;
filter:drop-shadow(0 0 12px var(--accent));margin-bottom:12px;animation:logoBounce 3s infinite}
@keyframes logoBounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}
h1{font-size:14px;margin:0 0 18px 0;color:var(--accent);text-shadow:0 0 10px var(--accent),0 0 20px var(--neon-b)}

/* buttons */
.button{
  display:inline-block;text-decoration:none;
  background:linear-gradient(45deg,var(--neon-b),var(--accent));
  color:#000;padding:16px 30px;border-radius:10px;margin:8px;
  box-shadow:0 0 16px var(--accent);font-size:12px;
  transition:transform .14s,box-shadow .14s;
}
.button:hover{transform:scale(1.05);box-shadow:0 0 30px var(--neon-b)}

/* pacman */
#pacman-container{display:none;flex-direction:column;align-items:center;margin-top:18px;width:100%;max-width:360px;
  cursor:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 16 16'><rect x='6' y='1' width='1' height='1' fill='%23228B22'/><rect x='8' y='1' width='1' height='1' fill='%23228B22'/><rect x='5' y='2' width='1' height='1' fill='%23228B22'/><rect x='6' y='2' width='1' height='2' fill='%2332CD32'/><rect x='7' y='2' width='2' height='1' fill='%23228B22'/><rect x='8' y='2' width='1' height='2' fill='%2332CD32'/><rect x='9' y='2' width='1' height='1' fill='%23228B22'/><rect x='4' y='4' width='1' height='1' fill='%23DC143C'/><rect x='5' y='4' width='2' height='1' fill='%23FF1744'/><rect x='7' y='3' width='1' height='2' fill='%23228B22'/><rect x='8' y='4' width='2' height='1' fill='%23FF1744'/><rect x='10' y='4' width='1' height='1' fill='%23DC143C'/><rect x='3' y='5' width='1' height='2' fill='%23DC143C'/><rect x='4' y='5' width='1' height='3' fill='%23FF1744'/><rect x='5' y='5' width='1' height='4' fill='%23FF1744'/><rect x='6' y='5' width='1' height='5' fill='%23FF1744'/><rect x='7' y='5' width='1' height='5' fill='%23FF1744'/><rect x='8' y='5' width='1' height='5' fill='%23FF1744'/><rect x='9' y='5' width='1' height='4' fill='%23FF1744'/><rect x='10' y='5' width='1' height='3' fill='%23FF1744'/><rect x='11' y='5' width='1' height='2' fill='%23DC143C'/><rect x='5' y='6' width='1' height='1' fill='%23FFFFFF'/><rect x='9' y='6' width='1' height='1' fill='%23FFFFFF'/><rect x='4' y='8' width='1' height='1' fill='%23DC143C'/><rect x='5' y='9' width='1' height='1' fill='%23DC143C'/><rect x='6' y='10' width='2' height='1' fill='%23DC143C'/><rect x='9' y='9' width='1' height='1' fill='%23DC143C'/><rect x='10' y='8' width='1' height='1' fill='%23DC143C'/></svg>") 8 2,auto;
}
#animation{
  position:relative;width:320px;height:120px;
  background:#000000;
  border:3px solid var(--accent);border-radius:12px;box-shadow:0 0 20px var(--accent);overflow:hidden
}
/* Movimiento sin saltos + chompeo */
/* Pac-Man: cuerpo amarillo; la boca es un pseudo-elemento negro */
.pacman{
  position:absolute;top:30px;left:-70px;
  width:64px;height:64px;border-radius:50%;
  background:#ffff00;
  cursor:inherit;
  transform-origin:center;
  animation:movePacman 5s linear infinite;
  overflow:hidden;
}

/* Boca negra animada */
.pacman::after{
  content:"";
  position:absolute;inset:0;
  background:#000000;
  clip-path:polygon(50% 50%,100% 18%,100% 82%);
  animation:chomp-mouth .36s infinite alternate;
}

/* al "morir" escondemos la boca */
.pacman.dead::after{
  display:none;
}

@keyframes chomp-mouth{
  0%  { clip-path:polygon(50% 50%,100% 18%,100% 82%); }  /* medio cerrada */
  100%{ clip-path:polygon(50% 50%,100% 0%,100% 100%); }  /* boca abierta */
}

@keyframes movePacman{
  0%   {left:-70px; transform:rotateY(0deg)}
  45%  {left:260px; transform:rotateY(0deg)}   /* va a la derecha */
  50%  {left:260px; transform:rotateY(180deg)} /* gira */
  95%  {left:-70px; transform:rotateY(180deg)} /* regresa mirando izq */
  100% {left:-70px; transform:rotateY(180deg)}
}
/*.cherry{
  position:absolute;top:42px;left:248px;width:18px;height:18px;background:#ff2b2b;border-radius:50%;
  box-shadow:inset -3px -3px 5px rgba(0,0,0,.25),0 0 12px #ff0044
}*/
#bonus{position:absolute;top:8px;left:140px;color:#ffcc00;font-size:10px;opacity:0}

/* üîß BONUS: animaci√≥n faltante (bug fix) */
@keyframes showBonus{
  0%{opacity:0;transform:translateY(6px) scale(.9);text-shadow:0 0 0 #ffcc00}
  30%{opacity:1;transform:translateY(0) scale(1);text-shadow:0 0 10px #ffcc00}
  70%{opacity:1}
  100%{opacity:0;transform:translateY(-10px) scale(1.05)}
}

#pacman-message{color:#ffcc00;text-shadow:0 0 12px var(--neon-b);font-size:16px;margin-top:14px;max-width:90%;line-height:1.3}

/* poll */
#poll{display:none;margin-top:16px;flex-direction:column;align-items:center}
.poll-btn{margin:6px;background:linear-gradient(45deg,var(--neon-b),var(--accent));
color:#000;padding:12px 20px;border-radius:10px;box-shadow:0 0 16px var(--accent);font-size:12px;
font-family:'Press Start 2P',monospace;border:none;cursor:pointer;transition:transform .2s,box-shadow .2s}
.poll-msg{margin-top:12px;color:#ffcc00;font-size:12px;text-shadow:0 0 8px var(--neon-b)}

/* holo */
.holo{
  position:fixed;min-width:190px;max-width:260px;padding:10px 12px;
  background:rgba(0,255,255,.06);border:1px solid rgba(0,255,255,.45);
  border-radius:8px;color:var(--accent);
  text-shadow:0 0 12px var(--accent),0 0 6px var(--neon-b);
  box-shadow:0 0 18px rgba(0,255,255,.35);
  font-size:11px;opacity:0;pointer-events:none;animation:holoIn 6s linear forwards
}
@keyframes holoIn{0%{opacity:0;transform:translateY(18px)scale(.96)}10%{opacity:1;transform:translateY(0)scale(1)}80%{opacity:1}100%{opacity:0;transform:translateY(-18px)scale(.98)}}

/* footer */
footer{position:fixed;bottom:0;left:0;right:0;background:rgba(0,0,0,.28);
color:var(--neon-a);font-size:10px;padding:6px 0;border-top:1px solid var(--accent);text-shadow:0 0 8px var(--accent)}
footer span{display:inline-block;white-space:nowrap;animation:marq 20s linear infinite}
@keyframes marq{from{transform:translateX(100%)}to{transform:translateX(-100%)}}

/* responsive */
@media(max-width:600px){
  h1{font-size:12px;margin-bottom:12px}
  #logo{width:56px;height:56px;margin-bottom:8px}
  .button{padding:14px 20px;font-size:11px;margin:6px}
  #animation{width:88vw;height:110px}
  .pacman{width:54px;height:54px;top:28px}
  #pacman-message{font-size:13px;margin-top:12px}
  footer{font-size:9px}
}
@keyframes blink{0%,50%,100%{opacity:1}25%,75%{opacity:.3}}
*{-webkit-user-select:none;user-select:none}
</style>
</head>
<body>

<div id="logo"></div>
<h1>üç∂ CLUB DE FERMENTOS UNIANDES üç∂</h1>

<a href="https://chat.whatsapp.com/F5aFuXaILuC3MxsDW4c0Qi?mode=wwt" target="_blank" class="button" id="join-btn">QUIERO UNIRME</a>
<a href="#" id="comida-btn" class="button">QUIERO COMIDA GRATIS üçí</a>
<a href="#" id="no-fermentar" class="button">üò§ NO ME GUSTA FERMENTAR</a>

<div id="pacman-container">
  <div id="animation">
    <div class="pacman" id="pacman" aria-label="Pac-Man"></div>
    <div class="cherry" aria-hidden="true"></div>
    <div id="bonus">+100 pts üçí</div>
  </div>
  <div id="pacman-message">üéÆ DALE CLICK AL PAC-MAN PARA OBTENER COMIDA GRATIS üçí</div>

  <div id="poll">
    <h2 style="font-size:12px;margin-bottom:14px;">üß´ VOTA POR TU FERMENTO FAVORITO üß´</h2>
    <div>
      <button class="poll-btn" data-name="Kimchi">ü•¨ Kimchi</button>
      <button class="poll-btn" data-name="Masa madre">üçû Masa madre</button>
      <button class="poll-btn" data-name="Kombucha">üç∂ Kombucha</button>
      <button class="poll-btn" data-name="K√©fir">ü•õ K√©fir</button>
    </div>
    <div id="poll-msg" class="poll-msg"></div>
  </div>
</div>

<footer><span>üíæ Bienvenido al Club de Fermentos Uniandes - CFU ¬© 2000-2025 üíæ | ‚ú® S√≠guenos @cfuniandes ‚ú®</span></footer>

<audio id="bgm" loop preload="auto" src="https://cdn.pixabay.com/download/audio/2021/10/13/audio_2b7b2b16f9.mp3?filename=8-bit-background-loop-119.mp3"></audio>
<audio id="clickS" preload="auto" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_bf11a7b6ef.mp3?filename=retro-click-2-89698.mp3"></audio>
<audio id="waka" preload="auto" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_749b00288e.mp3?filename=pacman-waka-waka-112.wav"></audio>
<audio id="bonusS" preload="auto" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_5f6a8a8e5f.mp3?filename=powerup-1-6222.mp3"></audio>

<script>
/* bubbles */
for(let i=0;i<20;i++){
  const el=document.createElement('div');
  el.className=Math.random()>0.55?'bubble':'star';
  el.style.left=(Math.random()*92+2)+'vw';
  el.style.top=(Math.random()*92+2)+'vh';
  el.style.animationDuration=(5+Math.random()*10)+'s';
  document.body.appendChild(el);
}

const comidaBtn=document.getElementById('comida-btn');
const noFermentar=document.getElementById('no-fermentar');
const pacmanContainer=document.getElementById('pacman-container');
const pacman=document.getElementById('pacman');
const message=document.getElementById('pacman-message');
const bgm=document.getElementById('bgm');
const clickS=document.getElementById('clickS');
const waka=document.getElementById('waka');
const bonusS=document.getElementById('bonusS');
const bonus=document.getElementById('bonus');
const poll=document.getElementById('poll');
const pollMsg=document.getElementById('poll-msg');
const joinBtn=document.getElementById('join-btn');

let userStarted=false;
function startAudio(){
  if(userStarted)return;
  userStarted=true;
  bgm.volume=0.25;bgm.play().catch(()=>{});
}
function playSound(a,v=1){
  try{const s=a.cloneNode(true);s.volume=v;s.play().catch(()=>{});}catch(e){}
}

document.querySelectorAll('.button,.poll-btn').forEach(b=>{
  b.addEventListener('click',()=>{startAudio();playSound(clickS,0.9);});
});

comidaBtn.addEventListener('click',e=>{
  e.preventDefault();
  comidaBtn.style.display='none';
  noFermentar.style.display='none';
  pacmanContainer.style.display='flex';
});

let pacmanAlive = true;
pacman.addEventListener('click', () => {
  if (!pacmanAlive) return;
  pacmanAlive = false;
  startAudio();
  playSound(waka, 0.9);
  playSound(bonusS, 0.9);

  // Eliminamos Pac-Man
  pacman.style.display = 'none';

  const go = document.createElement('div');
  go.textContent = 'üçΩÔ∏è PACMAN ALIMENTADO üçΩÔ∏è';
  go.style.position = 'absolute';
  go.style.top = '50%';
  go.style.left = '50%';
  go.style.transform = 'translate(-50%, -50%)';
  go.style.color = '#FFD700';
  go.style.textShadow = '0 0 10px #FFAA00,0 0 18px #FF6600';
  go.style.fontSize = '18px';
  go.style.animation = 'blink 1s infinite';
  go.style.width = '90%';
  go.style.textAlign = 'center';
  document.getElementById('animation').appendChild(go);

  bonus.style.animation = 'showBonus 1.2s forwards';

  message.textContent = 'Asiste a nuestro primer encuentro y disfruta de COMIDA GRATIS üçï';
  setTimeout(() => {
    bonus.style.animation = 'none';
    message.textContent = "üëâ Dale click a 'QUIERO UNIRME' para inscribirte üçΩÔ∏è";
    poll.style.display = 'flex';
  }, 4000);
});


noFermentar.addEventListener('click',e=>{
  e.preventDefault();
  startAudio();playSound(clickS,0.9);
  alert("üêÑ ¬°DESHONOR SOBRE TU VACA! Has rechazado la fermentaci√≥n ancestral üêÑ");
});

const pollTexts={
  Kimchi:"üî• Picante como tu esp√≠ritu fermentador üî•",
  "Masa madre":"üçû Levadura legendaria, respeto total üçû",
  Kombucha:"üç∂ Probi√≥tico y poderoso üç∂",
  "K√©fir":"ü•õ Culturas ancestrales aprueban tu elecci√≥n ü•õ"
};
let pollVoted=false;
document.querySelectorAll(".poll-btn").forEach(btn=>{
  btn.addEventListener("click",()=>{
    if(pollVoted)return;
    pollVoted=true;
    const name=btn.dataset.name;pollMsg.textContent=pollTexts[name];
    playSound(bonusS,0.95);
    btn.style.transform="scale(1.25)";btn.style.boxShadow="0 0 32px var(--neon-b)";
    document.querySelectorAll(".poll-btn").forEach(b=>{
      if(b!==btn){b.style.opacity="0.3";b.style.pointerEvents="none";}
    });
    setTimeout(()=>{btn.style.transform="scale(1)";},520);
  });
});

/* holograms: appear only outside central zone */
const holoMessages=[
  "üç∂ FREE KOMBUCHA ALERT!","üß´ MICROBIOS = MAGIC","üíæ CFU FOREVER 2000",
  "ü™© FERMENT THE SYSTEM","üì∏ S√≠guenos en Instagram @cfuniandes","üß¨ JOIN THE CULTURA","‚ú® VIBRANDO EN pH 3.8 ‚ú®"
];
function spawnHolo(){
  if(document.querySelectorAll('.holo').length>=4)return;
  let left,top,tries=0;
  do{
    left=Math.random()*100;top=Math.random()*100;tries++;
  }while(
    (left>20&&left<80&&top>25&&top<75)|| // central zone
    (top<10)||(top>88)                   // avoid title/footer
  );
  const d=document.createElement('div');
  d.className='holo';
  d.textContent=holoMessages[Math.floor(Math.random()*holoMessages.length)];
  d.style.left=left+'vw';d.style.top=top+'vh';
  d.style.rotate=(Math.random()*8-4)+'deg';
  document.body.appendChild(d);
  setTimeout(()=>d.remove(),6000);
}
setInterval(spawnHolo,1800);
</script>
</body>
</html>
